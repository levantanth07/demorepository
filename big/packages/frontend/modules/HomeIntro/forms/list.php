<?phpclass HomeIntroForm extends Form{	function __construct()	{		Form::Form('HomeIntroForm');	}	function on_submit(){		//System::Debug($_REQUEST);die;		if(Url::get('send_email')) {			$content = Url::get('content').'<br>';			$new_array=array(				'email'=>$_REQUEST['send_email'],				'time'=>time(),				'content'=>$content,				'type'=>'contact',				'status'=>'UNCENSOR',				'portal_id'=>PORTAL_ID			);			if(DB::insert('contact',$new_array)) {				unset($_SESSION['items']);//				$from = Portal::get_setting('send_email_address');				$from = 'dangkhoa115@gmail.com';				$subject = 'Khách gửi Email';				$headers = "MIME-Version: 1.0" . "\r\n";				$headers .= "Content-type:text/html;charset=UTF-8" . "\r\n";				$headers .= 'From: <' . $from . '>' . "\r\n";				$to = Portal::get_setting('company_email');				$mail_content = file_get_contents('cache/email_template/contact.html');				$arr_replace = array(					'[[date]]' => date('d/m/Y'),					'[[content]]' => $new_array['content']				);				$mail_content = strtr($mail_content, $arr_replace);				if($from) {					mail($to, $subject, $mail_content, $headers);					//System::send_mail($from,$to,$subject,$mail_content);					echo 1;die;					echo '<script>alert("Bạn đã gửi Email thành công");window.location =""</script>';					exit();				}			}		}	}	function draw()	{		$this->map = array();        $this->map['partners'] = HomeIntroDB::get_partners();		$this->parse_layout('list',$this->map);	}}?>